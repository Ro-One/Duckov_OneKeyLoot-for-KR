# 逃离鸭克夫 Mod —— 一键收集战利品

中文 | [English](README_EN.md)

## Steam WorkShop

<https://steamcommunity.com/sharedfiles/filedetails/?id=3589344509>

## 【功能】

- 显示 **【全部拾取】** 按钮
- 新增 **【一键收集战利品（按品质）】** 按钮组
- 新增 **【一键收集战利品（按价值）】** 按钮组
- 新增 **【一键收集战利品（按价重比）】** 按钮组
- 支持 **中/英文本地化热切换**
- 支持 **自定义动态配置热切换**：
  - 显示/隐藏【全部拾取 / 一键收集战利品】按钮或按钮组
  - 自定义一键收集按钮数量
  - 自定义一键收集按钮颜色
  - 自定义一键收集范围
- 支持 **ModConfig（可选）**  
  *<https://steamcommunity.com/sharedfiles/filedetails/?id=3590674339>*  
  *目前 ModConfig 的配置文本不支持中英热切换；修改后需重启游戏生效。*

> 本 Mod 的 UI 部分由 ChatGPT-5 协助编写。

---

## 【按钮逻辑】

### 【全部拾取】

- 一键拾取箱内所有物品，直到背包格满为止。

### 【一键收集战利品（按品质）】

- 有条件拾取，直到背包格满为止：
  - 物品已被标记为**爱心（收藏）**
  - 物品品质 **≥ 按钮显示的最低品质阈值**

### 【一键收集战利品（按价值）】

- 有条件拾取，直到背包格满为止：
  - 物品已被标记为**爱心（收藏）**
  - 物品在商店的出售价 **≥ 按钮显示的最低价格阈值**

### 【一键收集战利品（按价重比）】

- 有条件拾取，直到背包格满为止：
  - 物品已被标记为**爱心（收藏）**
  - 物品在商店的总出售价/物品总重量 **≥ 按钮显示的最低价重比阈值**

---

## 【使用方法】

1. 在创意工坊页面订阅本 Mod。
2. 进入游戏 → 打开 **Mod** 菜单 → 勾选 **One-Key Loot**。
3. 如果安装了 **ModConfig**：请同时勾选 **ModConfig**，并将其排序在 **One-Key Loot** 上方。
4. **重启一次游戏**，确保配置正常载入。
5. 进入游戏 → 读取存档 → 进入地图。
6. 打开任意战利品箱，可看到默认的 3 组按钮，按需点击使用。

---

---

## 【自定义配置】

*更新后第一次使用，请先按【使用方法】完整运行一遍以正确生成/加载配置。*

### 使用【ModConfig】（推荐，支持热切换）

- 进入游戏并读取存档后，打开 **ESC → 设置 → Mod Settings**。

### 未安装【ModConfig】（不支持热切换）

- 关闭游戏，在 Windows 中打开以下文件并编辑保存：

> Escape from Duckov\Duckov_Data\StreamingAssets\OneKeyLootConfig.txt

### 【品质范围】

- **默认：** 2,3,4,5
- 代表 4 个按钮：分别为 **品质≥2**、**品质≥3**、**品质≥4**、**品质≥5**
- 每个数值表示最低品质；游戏内品质范围为 **1 ~ 9**。

### 【价值范围】

- **默认：** 100,500,1000
- 代表 3 个按钮：分别为 **价值≥100**、**价值≥500**、**价值≥1000**
- 每个数值为商店出售价阈值（通常为物品正常价值的一半）。

### 【价重比范围】

- **默认：** 500,2500,5000
- 代表 3 个按钮：分别为 **价重比≥500**、**价重比≥500**、**价重比≥5000**
- 每个数值为价重比阈值（重量包含物品插槽内所有子物品）。

### 【按钮组颜色】

- **默认：** #4CAF4F,#42A5F5,#BA68C6,#BF7F33
- 代表 4 个按钮：颜色分别为 **#4CAF4F**、**#42A5F5**、**#BA68C6**、**#BF7F33**
- 每个颜色字符串必须为16进制且以#开头，支持不透明度（#4CAF4F等价于#4CAF4FFF）

### 配置格式规则

- 【品质范围】与【价值范围】与【价重比范围】与【按钮组颜色】各自支持自定义 **1~4** 个数值
- 使用半角逗号 **,** 分隔
- 若自定义格式错误，将回退使用默认值

---

## 【兼容性】

- 本 Mod 的品质过滤基于**原版官方定义的隐藏品质**，与“自定义战利品颜色”类 Mod 不冲突。
- 受编译器限制，目前仅能编译为 **.NET Framework 4.8** 的 DLL。若系统未安装 .NET Framework 4.8，可能导致 Mod 无法正常运行（存疑）。
- 本 Mod 的 UI 锚定于游戏中原本隐藏的“一键拾取”按钮；若其他 Mod 修改了该处逻辑，可能产生冲突。

---

## 【TODO】

- 根据箱内战利品动态显示对应的品质等级按钮
- UI 进一步优化
- 更多可自定义选项
